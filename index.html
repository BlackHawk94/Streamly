<!doctype html>
<html>
<head>
  <title>Streamly</title>
  <meta name="description" content="YouTube HTML5 playlists, extremely simple. An open-source project dedicated to building upon YouTube's normal playlist features by allowing you to manipulate playlists on the fly while playing them." />
  <link rel="shortcut icon" id="favicon" href="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACIAAAAiCAMAAAANmfvwAAABDlBMVEUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABxUYW9AAAAWXRSTlMAAQIDBAUGCAkRFBUZGhscHiAhJyorLzI0ODo7PUZMTlBVVldYWVtcXV5hZHB1foKDiIuPlZiboKKlpqirr7CytcDDyMrMzs/R09Xa3N7g4ubp7e/x9/n7/Ud7aO4AAAE3SURBVBgZlcFpOxtRAIbhZ8YgltBaopZEHanamtKgtYaSklJ0xPL+/z8iGedMZq5MPrhv3mlgslzZ2aksT/aTbfpQsYMpun24UMr5OGneN3XZ9EjoO1KGA5+Yd6pMxx5OVT1sY31STwUifqg3jaF8TWn/fdo+y1oFCv+UUqLtXpahxSs/KeGOlrwcQ2TwhxJGgWU5Bit/ptgSsCfHEJu9l7ULXMkxdPgbL4r8AR7kGJLmFQmBphxD0pQiTeCvHEPC/IMiV8C+HENs7LesX8CaHIOVqyr2FZiQY4j4K8/q+Ah4TVmGtplbJYQeLRuyvgAjp0pZp63/SW/Ogtx3pT0GRErqqYh1oh6OcIKGMl0GxHKXylAfJCHYV5effaQthEoJ5+jiL94odl3yyTRc3KrV67Wt4jDv8wr7Zt73xzlZAQAAAABJRU5ErkJggg==" type="image/x-icon" />
  <link rel="stylesheet" href="//fonts.googleapis.com/css?family=Pacifico|Roboto" type="text/css" />
  <link rel="stylesheet" href="//maxcdn.bootstrapcdn.com/font-awesome/4.6.3/css/font-awesome.min.css">
  <link rel="stylesheet" href="styles.css" type="text/css" />
  <link rel="stylesheet" href="//code.jquery.com/ui/1.12.0/themes/base/jquery-ui.css" type="text/css" />
  
  <script src="//code.jquery.com/jquery-3.1.0.min.js" integrity="sha256-cCueBR6CsyA4/9szpPfrX3s49M9vUU5BgtiJj06wt/s=" crossorigin="anonymous"></script>
  <script src="//code.jquery.com/ui/1.12.0/jquery-ui.min.js" integrity="sha256-eGE6blurk5sHj+rmkfsGYeKyZx3M4bG+ZlFyA7Kns7E=" crossorigin="anonymous"></script>
  <script src="jquery.xdomainajax.js"></script>
  <script src="//cdn.rawgit.com/zenorocha/clipboard.js/v1.5.12/dist/clipboard.min.js"></script>
  <script src="//www.youtube.com/iframe_api"></script>
  <script src="index.js"></script>
</head>
<body>
  <a href="https://github.com/LNFWebsite/Streamly" target="_blank"><img style="position: absolute; top: 65px; right: 0; border: 0;" src="https://camo.githubusercontent.com/38ef81f8aca64bb9a64448d0d70f1308ef5341ab/68747470733a2f2f73332e616d617a6f6e6177732e636f6d2f6769746875622f726962626f6e732f666f726b6d655f72696768745f6461726b626c75655f3132313632312e706e67" alt="Fork me on GitHub" data-canonical-src="https://s3.amazonaws.com/github/ribbons/forkme_right_darkblue_121621.png"></a>
  <header>
    <h1 id="title"><a href="#" style="color:white;text-decoration:none;">Streamly <span style="color:blue;">Beta</span></a></h1>
    <form action="javascript:input(0);" method="get" id="searchForm">
      <input type="textbox" id="inputBox" placeholder="Search, drag and drop video, or paste its URL..." autofocus>
    </form>
    <button id="saveButton" data-clipboard-text="https://lnfwebsite.github.io/Streamly/" onclick="saveButton();">Save playlist</button>
    <!--<span class="fa fa-cog" id="settingsButton" onclick="openSettings();" title="Settings"></span>-->
  </header>
  <div id="main">
    <div id="blurBackground"></div>
    <form action="javascript:input(2);" method="get">
      <input type="textbox" id="playlistNameBox" placeholder="Streamly Playlist" title="Enter your playlist name" />
    </form>
    <table id="videosTable"></table>
    <a href="//github.com/LNFWebsite/Streamly/wiki/Getting-Started" target="_blank">Getting Started</a> | 
    <a href="//github.com/LNFWebsite/Streamly/wiki/Playlists" target="_blank">Playlists Wiki</a> | 
    <a href="//lnfwebsite.github.io/Streamly-Import/" target="_blank">Import Playlists</a> | 
    <a href="//www.reddit.com/r/StreamlyReddit/" target="_blank">StreamlyReddit</a>
    <br>
    <a href="javascript:shareOnRedditAd();">Share your playlist on Reddit!</a>
    <p style="color: grey;margin: 0;padding: 0;">The playlist pausing issue has been resolved.</p>
  </div>
  <footer>
    <div id="previousVideo" onclick="backVideo();" title="Back">
      <p id="previousVideoName"></p>
      <img id="previousVideoImage" src="" />
      <span class="fa fa-backward"></span>
      <p id="previousVideoTime"></p>
    </div>
    <div id="playlistInterface">
      <div id="youtubeContainer" title="Click to pause">
        <iframe id="youtube" src=""></iframe>
      </div>
      <div id="currentVideoTiming">
        <span id="currentTime">0:00</span>
        <span id="progressContainer">
          <span id="progress" style="width:0%;"></span>
        </span>
        <span id="videoTime">0:00</span>
      </div>
    </div>
    <div id="nextVideo" onclick="forwardVideo();" title="Forward">
      <img id="nextVideoImage" src="" />
      <p id="nextVideoName"></p>
      <span class="fa fa-forward"></span>
      <p id="nextVideoTime"></p>
    </div>
    <div id="settings">
      <span class="fa fa-repeat" onclick="playlistFeatures.repeat();" title="Playlist repeat"></span>
      <span class="fa fa-rss" onclick="playlistFeatures.autoplay();" title="Streamly Radio"></span>
      <span class="fa fa-reddit" id="ad" onclick="shareOnReddit();" title="Share playlist on Reddit"></span>
    </div>
  </footer>
  <script>
  function shareOnRedditAd() {
    var i=0;
    var text = document.getElementById('ad');
    text.style.color = 'grey';
    function flash() {
      i++;
      text.style.color = (text.style.color=='grey') ? 'lightblue':'grey';
      if (i == 11) {
        clearInterval(clr);
      }
    }
    var clr = setInterval(flash, 300);
  }
  
  getPlaylist();
  makeSortable();
  videoPreviews();
  
  $("#inputBox").on("paste", function() {
    setTimeout(function() {
      input(1);
    }, 0);
  });
  
  $("#playlistNameBox").on("blur", function() {
    input(2);
  });
  
  // **BREAKTHROUGH THE GREATER!**
  var player;
  function onYouTubeIframeAPIReady() {
    player = new YT.Player('youtube', {
        events: {
          'onReady': onPlayerReady,
          'onStateChange': onPlayerStateChange
        }
    });
  }
  function whado(playerStatus) {
    switch(playerStatus) {
      //unstarted
      case -1:
        break;
      //ending
      case 0:
        console.log("ending");
        loopVideo();
        break;
      //playing
      case 1:
        videoFunctions.play();
        break;
      //paused
      case 2:
        videoFunctions.pause();
        break;
      //buffering
      case 3:
        break;
      //cued
      case 5:
        actionTimers.clear();
        videoProgress();
        actionTimers.pause();
        break;
    }
  }
  function onPlayerStateChange(event) {
    whado(event.data);
  }
  function onPlayerReady(event) {
    console.log("onPlayerReady");
    actionTimers.clear();
    videoProgress();
  }
  
  $(document).keyup(function(e) {
    if ((!$("#inputBox").is(":focus") || $("#inputBox").val() == "") && !$("#playlistNameBox").is(":focus")) {
      switch (e.keyCode) {
        case 37:
          e.preventDefault();
          backVideo();
          break;
        case 39:
          e.preventDefault();
          forwardVideo();
          break;
        case 82:
          e.preventDefault();
          playlistFeatures.autoplay();
          break;
      }
    }
  });
  
  $("#inputBox").autocomplete({
    delay: 100,
    source: function (request, response) {
      var suggestURL = "//suggestqueries.google.com/complete/search?hl=en&ds=yt&q=" + request.term + "&client=chrome";
      $.ajax({
        method: 'GET',
        dataType: 'jsonp',
        jsonpCallback: 'jsonCallback',
        url: suggestURL
      })
      .done(function(data){
        suggestions = data[1];
        if (suggestions.length > 10) {
          suggestions.length = 10;
        }
        for (var i = suggestions.length - 1; i > -1; i--) {
          if (suggestions[i].search(/htt(p|s):\/\//i) > -1) {
            suggestions.splice(i, 1);
          }
        }
        response(suggestions);
      });
    }
  });
  
  new Clipboard("#saveButton");
  function saveButton() {
    $("#saveButton").text("Playlist copied to clipboard!");
    setTimeout(function() {
      $("#saveButton").text("Save playlist");
    }, 2000);
  }
  
  function shareOnReddit() {
    var playlistName = $("#playlistNameBox").val();
    if (playlistName === "") {
      playlistName = $("#playlistNameBox").attr("placeholder");
    }
    window.open("https://www.reddit.com/r/StreamlyReddit/submit?resubmit=true&title=Playlist%20-%20" + playlistName + "&url=https://lnfwebsite.github.io/Streamly/%23" + window.location.hash.substr(1), "_blank");
  }
  </script>
  
  <!-- Start of StatCounter Code for Default Guide -->
  <script type="text/javascript">
  var sc_project=10543623; 
  var sc_invisible=1; 
  var sc_security="4c623aaf"; 
  var scJsHost = (("https:" == document.location.protocol) ?
  "https://secure." : "http://www.");
  document.write("<sc"+"ript type='text/javascript' src='" +
  scJsHost+
  "statcounter.com/counter/counter.js'></"+"script>");
  </script>
  <noscript><div class="statcounter"><a title="web analytics"
  href="http://statcounter.com/" target="_blank"><img
  class="statcounter"
  src="http://c.statcounter.com/10543623/0/4c623aaf/1/"
  alt="web analytics"></a></div></noscript>
  <!-- End of StatCounter Code for Default Guide -->
  
</body>
</html>
